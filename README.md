# üè• Hospital & Clinic Management System

## Project Overview

This project is a comprehensive **Oracle Database System** designed to manage the core operations of a hospital or clinic. It leverages **SQL** for data definition and manipulation, and **PL/SQL** for implementing complex business logic, data validation, and automation.

The system efficiently handles **Patients, Doctors, Appointments, Treatments, Prescriptions, Medicines, and Billing**, providing a solid foundation for a real-world medical management application.

---

## üìÅ Project Structure & Implementation Sequence

To ensure a smooth setup, follow these steps in the exact order provided. This sequence respects foreign key constraints and initializes the database correctly.

### Phase 1: Database Schema & Data Population

1.  **Create Sequences:** First, run the scripts to create all necessary sequences for generating unique primary keys.
    - `PATIENT_ID_SEQ`
    - `DOCTOR_ID_SEQ`
    - `APPOINTMENT_ID_SEQ`
    - `TREATMENT_ID_SEQ`
    - `MEDICINE_ID_SEQ`
    - `PRESCRIPTION_ID_SEQ`
    - `BILL_ID_SEQ`

2.  **Create Tables:** Execute the `CREATE TABLE` statements for the following tables in this specific order to satisfy foreign key dependencies:
    - `PATIENTS`
    - `DOCTORS`
    - `APPOINTMENTS` (Depends on PATIENTS and DOCTORS)
    - `TREATMENTS` (Depends on APPOINTMENTS)
    - `MEDICINES`
    - `PRESCRIPTIONS` (Depends on APPOINTMENTS and MEDICINES)
    - `BILLS` (Depends on APPOINTMENTS)

3.  **Populate with Sample Data:** Insert the sample data into the tables. It's recommended to follow the same logical order as table creation to maintain referential integrity.
    - Insert into `PATIENTS`
    - Insert into `DOCTORS`
    - Insert into `APPOINTMENTS`
    - Insert into `TREATMENTS`
    - Insert into `MEDICINES`
    - Insert into `PRESCRIPTIONS`
    - Insert into `BILLS`

### Phase 2: Business Intelligence & Reporting (Queries)

After the database is populated, you can run the provided analytical SQL queries to gain insights, such as:
- Listing all patients with their doctors.
- Finding the most expensive treatment.
- Identifying doctors with no appointments.
- Showing the top 3 most prescribed medicines.
- Calculating total revenue per doctor.

### Phase 3: Advanced Logic & Automation (PL/SQL)

This phase involves creating programmatic objects to encapsulate business rules.

1.  **Create Package Specification & Body:** Execute the `CREATE PACKAGE` and `CREATE PACKAGE BODY` statements for `PKG_HOSPITAL_MANAGEMENT`. This package contains core procedures and functions for managing the hospital's operations.

2.  **Create Triggers:** Execute the `CREATE TRIGGER` statements. These triggers automate key processes within the system.
    - `TRG_UPDATE_MEDICINE_STOCK`: Automatically deducts medicine stock when a prescription is issued.
    - `Trg_After_Treatment_Issue_Bill`: Automatically generates a bill when a treatment is recorded.
    - `TRG_PREVENT_OVERBOOKING`: Enforces a business rule to prevent a doctor from being overbooked.

---

## ‚öôÔ∏è PL/SQL Components Details

### Package: `PKG_HOSPITAL_MANAGEMENT`

This package groups the following key functionalities:

- **`ADD_PATIENT` Procedure:** Safely inserts a new patient into the system with built-in exception handling.
- **`SCHEDULE_APPOINTMENT` Procedure:** Creates a new appointment after performing validations (e.g., checking if the doctor and patient exist, preventing patient double-booking, and enforcing the doctor's daily appointment limit).
- **`ISSUE_BILL` Procedure:** Generates a bill for an appointment, preventing duplicate bills for the same appointment.
- **`GET_TOTAL_REVENUE_BY_DOCTOR` Function:** Returns the total revenue generated by a specific doctor from paid bills.
- **`CALCULATE_PATIENT_AGE` Function:** Calculates and returns a patient's current age based on their date of birth.

### Triggers

- **`TRG_UPDATE_MEDICINE_STOCK`:** An `AFTER INSERT` trigger on the `PRESCRIPTIONS` table. It automatically updates the `STOCK_QUANTITY` in the `MEDICINES` table whenever a new prescription is added.
- **`TRG_AFTER_TREATMENT_ISSUE_BILL`:** An `AFTER INSERT` trigger on the `TREATMENTS` table. It automatically calls the `ISSUE_BILL` procedure to create a pending bill for the appointment associated with the new treatment.
- **`TRG_PREVENT_OVERBOOKING`:** A `BEFORE INSERT` trigger on the `APPOINTMENTS` table. It checks the number of existing appointments for a doctor on a given day and raises an error if inserting a new appointment would exceed the daily limit (5 appointments).
